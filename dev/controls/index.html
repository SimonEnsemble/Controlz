<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Control systems · Controlz.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/flux.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Controlz.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Controlz.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Controlz</a></li><li><a class="tocitem" href="../tfs/">Transfer Functions</a></li><li><a class="tocitem" href="../sim/">Simulation</a></li><li><a class="tocitem" href="../viz/">Visualization</a></li><li class="is-active"><a class="tocitem" href>Control systems</a><ul class="internal"><li><a class="tocitem" href="#P,-PI,-PID-controller-transfer-functions-1"><span>P, PI, PID controller transfer functions</span></a></li><li><a class="tocitem" href="#servo-response-of-a-simple-control-system-1"><span>servo response of a simple control system</span></a></li></ul></li><li><a class="tocitem" href="../faq/">FAQ</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Control systems</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Control systems</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/SimonEnsemble/Controlz.jl/blob/master/docs/src/controls.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Control-systems-1"><a class="docs-heading-anchor" href="#Control-systems-1">Control systems</a><a class="docs-heading-anchor-permalink" href="#Control-systems-1" title="Permalink"></a></h1><p>we build upon <code>simulate</code> to simulate feedback and feedforward control systems.</p><h2 id="P,-PI,-PID-controller-transfer-functions-1"><a class="docs-heading-anchor" href="#P,-PI,-PID-controller-transfer-functions-1">P, PI, PID controller transfer functions</a><a class="docs-heading-anchor-permalink" href="#P,-PI,-PID-controller-transfer-functions-1" title="Permalink"></a></h2><p>we express PID controller transfer functions in the form:</p><div>\[g_c(s)=K_c \left[1+\frac{1}{\tau_I}+\tau_D s \frac{1}{\tau_D \alpha s + 1}\right]\]</div><p>where <span>$\alpha$</span> characterizes the derivative filter. this controller function function governs the controller output in response to the input error signal.</p><p>To construct P, PI, or PID controllers:</p><pre><code class="language-julia">Kc = 2.0 # controller gain
pc = PController(Kc) # P-controller with given Kc

τI = 1.0 # integral time constant
pic = PIController(Kc, τI) # PI-controller with given Kc, τI

τD = 0.1 # derivative time constant
pidc = PIDController(Kc, τI,  τD, α=0.0) # PID-controller with given Kc, τI, τD. keyword argument is derivative filter α</code></pre><p>to construct controller transfer functions <span>$g_c(s)$</span> from the P, PI, or PID controller parameters:</p><pre><code class="language-julia">pic = PIController(2.0, 1.0)
gc = TransferFunction(pic) # (2s+2) / s</code></pre><h2 id="servo-response-of-a-simple-control-system-1"><a class="docs-heading-anchor" href="#servo-response-of-a-simple-control-system-1">servo response of a simple control system</a><a class="docs-heading-anchor-permalink" href="#servo-response-of-a-simple-control-system-1" title="Permalink"></a></h2><p>with skills in block diagram algebra, we can use <a href="../sim/#Controlz.simulate"><code>simulate</code></a> to simulate a control system with a great degree of flexibility. as an example, we simulate the response of a simple feedback control system to a set point change.</p><p><img src="../assets/simple_servo.png" alt/></p><p>let&#39;s specify <span>$g_c(s)$</span> as a PI controller and <span>$g_p(s)$</span> as a first-order system. the former describes the controller output responds to the error signal. the latter describes how the process responds to inputs– here, the process input is provided by the controller.</p><pre><code class="language-julia">pic = PIController(1.0, 1.0) 
gc = TransferFunction(pic) # controller transfer function
gp = 3 / (4 * s + 1) # process transfer function</code></pre><p>via block diagram algebra, we can solve for the transfer function governing the response to set point changes.</p><pre><code class="language-julia">g_ol = gc * gp # open-loop transfer function

g_servo = g_ol / (1 + g_ol) # transfer function for servo response</code></pre><p>the response of the process to a unit step set point change is thus:</p><pre><code class="language-julia">Y_sp = 1 / s # unit step set point change
Y = g_servo * Y_sp # resulting output in response to our set point change</code></pre><p>finally, we can find the response by inverting <code>Y</code> into the time domain:</p><pre><code class="language-julia">final_time = 12.0
t, y = simulate(Y, final_time)</code></pre><p>to also see the controller output, we build the error signal <code>E</code> and use <span>$g_c(s)=U(s)/E(s)$</span> to get <code>U</code>.</p><pre><code class="language-julia">E = Y_sp - Y # error signal
U = gc * E # resulting controller output
t, u = simulate(U, final_time) # controller output in the time domain</code></pre><p>a cheap way of getting the set point <span>$y_{sp}(t)$</span> is:</p><pre><code class="language-julia">t, ysp = simulate(Y_sp, final_time)</code></pre><p>finally, we can plot <code>y</code>, <code>ysp</code>, and <code>u</code> against <code>t</code> to visualize the response of our feedback PI control system to a set point change.</p><p><img src="../simple_servo_response.png" alt/></p><p>also plotted separately is the contribution to the controller output by the P- and I- components of the PI controller, obtained via:</p><pre><code class="language-julia">U_Paction = Kc * E # P-action
U_Iaction = Kc * τI / s * E # I-action

t, u_Paction = simulate(U_Paction, final_time)
t, u_Iaction = simulate(U_Iaction, final_time)</code></pre><article class="docstring"><header><a class="docstring-binding" id="Controlz.PController" href="#Controlz.PController"><code>Controlz.PController</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">pc = PController(Kc)</code></pre><p>Construct a Proportional (P) controller by specifying the controller gain defined under the following transfer function representation:</p><div>\[g_c(s)=K_c\]</div><p><strong>Arguments</strong></p><ul><li><code>Kc::Float64</code>: controller gain</li></ul><p><strong>Example</strong></p><pre><code class="language-julia">pc = PController(1.0) # specify P controller gain
gc = TransferFunction(pc) # construct transfer function with this P-controller gain</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonEnsemble/Controlz.jl/blob/6be29f18559844ed6ba06c3b833eed50d0c0afcc/src/controls.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Controlz.PIController" href="#Controlz.PIController"><code>Controlz.PIController</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">pic = PIController(Kc, τI)</code></pre><p>Construct a Proportional-Integral (PI) controller by specifying the controller gain and integral time constant defined under the following transfer function representation:</p><div>\[g_c(s)=K_c \left[1+\frac{1}{\tau_I s}\right]\]</div><p><strong>Arguments</strong></p><ul><li><code>Kc::Float64</code>: controller gain</li><li><code>τI::Float64</code>: integral time constant</li></ul><p><strong>Example</strong></p><pre><code class="language-julia">pic = PIController(1.0, 3.0) # specify PI controller params
gc = TransferFunction(pic) # construct transfer function with these PI-controller params</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonEnsemble/Controlz.jl/blob/6be29f18559844ed6ba06c3b833eed50d0c0afcc/src/controls.jl#L23-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Controlz.PIDController" href="#Controlz.PIDController"><code>Controlz.PIDController</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">pidc = PIDController(Kc, τI, τD, α=0.0)</code></pre><p>Construct a Proportional-Integral-Derivative (PID) controller by specifying the controller gain, integral time constant, derivative time constant, and derivative filter defined under the following transfer function representation:</p><div>\[g_c(s)=K_c \left[1+\frac{1}{\tau_I s}+\tau_D s \frac{1}{\alpha \tau_D s + 1}\right]\]</div><p><strong>Arguments</strong></p><ul><li><code>Kc::Float64</code>: controller gain</li><li><code>τI::Float64</code>: integral time constant</li><li><code>τD::Float64</code>: derivative time constant</li><li><code>α::Float64</code>: derivative filter</li></ul><p><strong>Example</strong></p><pre><code class="language-julia">pidc = PIDController(1.0, 3.0, 0.1) # specify PID controller params
gc = TransferFunction(pidc) # construct transfer function with these PID-controller params</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonEnsemble/Controlz.jl/blob/6be29f18559844ed6ba06c3b833eed50d0c0afcc/src/controls.jl#L54-L72">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../viz/">« Visualization</a><a class="docs-footer-nextpage" href="../faq/">FAQ »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 20 February 2020 02:52">Thursday 20 February 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
